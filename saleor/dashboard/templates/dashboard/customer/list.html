{% extends "dashboard/base.html" %}
{% load i18n %}
{% load prices_i18n %}
{% load materializecss %}

{% block title %}{% trans "Customers" %} - {{ block.super }}{% endblock %}

{% block body_class %}body-customers{% endblock %}

{% block breadcrumbs %}
    <ul class="breadcrumbs">
        <li>{% trans "Customers" %}</li>
    </ul>
{% endblock %}

{% block menu_sales_class %} active{% endblock %}

{% block content %}
    <form method="get">
        <div class="row">
            {{ form.email|materializecss:"s12 m3 l3" }}
            {{ form.name|materializecss:"s12 m3 l3" }}
            {{ form.order_status|materializecss:"s7 m3 l2" }}

            <div class="col s5 m3 l3">
                <button type="submit" class="btn btn--inline">{% trans "Filter" %}</button>
                {% if form.is_bound %}
                    <a class="btn btn--inline" href="{% url 'dashboard:customers' %}">{% trans "Clear" %}</a>
                {% endif %}
            </div>
        </div>
    </form>

    <div class="card">
        <div class="data-table-header{% if not customers %} data-table-header--no-data{% endif %}">
            <h5 class="card-title black-text">{% trans "Results" %} ({{ customers_count }})</h5>
        </div>

        <div class="data-table-container">
            <table data-table-api="/dashboard/api/customers/"
                                data-default-sort-column="last_order_id"
                                data-default-sort="desc"
                                data-max-page="{{ paginator.num_pages }}"
                                data-no-data-message="{% trans "No customers found." %}"
                                class="bordered hoverable responsive data-table data-table--orderable">
                <thead>
                    <th data-key="email" data-component="CustomerEmail">{% trans "Email" %}</th>
                    <th data-key="default_shipping_address__last_name" data-component="CustomerFullname" data-css-class="wide">{% trans "Fullname" %}</th>
                    <th data-key="default_shipping_address__country" data-component="CustomerLocation">{% trans "Location" %}</th>
                    <th data-key="last_order_id" data-component="CustomerLastOrder">{% trans "Last order" %}</th>
                    <th data-key="num_orders" data-css-class="right-align">{% trans "Number of orders" %}</th>
                </thead>
            </table>
        </div>
    </div>
{% endblock %}
